---
# required metadata

title: Azure Rights Management テナント キーを計画して実装する | Azure RMS
description:
keywords:
author: cabailey
manager: mbaldwin
ms.date: 05/20/2016
ms.topic: article
ms.prod: azure
ms.service: rights-management
ms.technology: techgroup-identity
ms.assetid: f0d33c5f-a6a6-44a1-bdec-5be1bc8e1e14

# optional metadata

#ROBOTS:
#audience:
#ms.devlang:
ms.reviewer: esaggese
ms.suite: ems
#ms.tgt_pltfrm:
#ms.custom:

---

# Azure Rights Management テナント キーを計画して実装する

*適用対象: Azure Rights Management、Office 365*

この記事の情報は、Azure RMS での Rights Management (RMS) テナント キーに関する計画作成および管理に役立ちます。 たとえば、マイクロソフトがテナント キーを管理する (既定値) のではなく、組織に該当する特定の規制に準拠するために、ユーザーが自分でテナント キーを管理する必要がある場合があります。  ユーザーでのテナント キーの管理は、Bring Your Own Key (BYOK) とも呼ばれます。

> [!NOTE]
> RMS テナント キーはサーバー ライセンサー証明書 (SLC) キーとも呼ばれます。 Azure RMS では、Azure RMS をサブスクライブする組織ごとに 1 つ以上のキーが保持されます。 組織で RMS に対して使用されるキー (ユーザー キー、コンピューター キー、ドキュメント暗号化キーなど) は、すべて暗号化されて RMS テナント キーにチェーンされます。

**概要:** 次の表は、推奨されるテナント キー トポロジのクイック ガイドとしてご使用ください。 詳細については、別のドキュメントを参照してください。

マイクロソフト管理のテナント キーを使用して Azure RMS をデプロイする場合、後で BYOK に変更することができます。 ただし現時点では、Azure RMS テナント キーを BYOK からマイクロソフト管理に変更することはできません。

|ビジネスの要件|推奨テナント キー トポロジ|
|------------------------|-----------------------------------|
|特殊なハードウェアを必要としない Azure RMS を短時間でデプロイする場合|マイクロソフト管理|
|Azure RMS を使用して、Exchange Online で完全な IRM 機能が必要な場合|マイクロソフト管理|
|キーはユーザーによって作成され、ハードウェア セキュリティ モジュール (HSM) で保護されます|BYOK<br /><br />現時点では、この構成を使用すると Exchange Online での IRM 機能には制限があります。 詳細については、「[BYOK の料金と制限事項](byok-price-restrictions.md)」を参照してください。|

## テナント キー トポロジを選択する:Microsoft による管理 (既定) または自主管理 (BYOK)
組織に最適なテナント キー トポロジを決定します。 既定では、Azure RMS でテナント キーが生成され、テナント キー ライフサイクルのほとんどの側面が管理されます。 これは、管理オーバーヘッドが最も少なくて済むシンプルな方法です。 多くの場合、テナント キーの存在を意識することすらありません。 Azure RMS にサインアップすれば、それ以外のキー管理プロセスは Microsoft によって処理されます。

または、独自のテナント キーを作成してオンプレミスでマスター コピーを保持するなど、テナント キーを完全に制御する必要がある場合があります。 多くの場合、このシナリオは BYOK (Bring Your Own Key) と呼ばれます。 この方法では、次の状況が発生します。

1.  社内で IT ポリシーに沿ってテナント キーを作成します。

2.  そのテナント キーを社内のハードウェア セキュリティ モジュール (HSM) から Microsoft が所有し管理する HSM にセキュリティで保護した状態で転送します。 このプロセス全体で、テナント キーがハードウェア保護境界の外に置かれることはありません。

3.  テナント キーを Microsoft に転送するときは、Thales HSM により常時保護されます。 Microsoft は Thales と連携してテナント キーが Microsoft の HSM から抽出できないようにしています。

オプションとして、テナント キーの使用状況と使用時期を正確に把握するために Azure RMS のほぼリアルタイムの使用状況ログを使用することもできます。

> [!NOTE]
> 追加の保護措置として、Azure RMS では北米、EMEA (欧州、中東、およびアフリカ)、およびアジアのデータ センターで独立したセキュリティ ワールドを使用しています。 テナント キーを自主管理する場合、キーは、RMS テナントが登録されている地域のセキュリティ ワールドに関連付けられています。 たとえば、欧州のお客様のテナント キーを北米やアジアのデータセンターで使用することはできません。

## テナント キーのライフサイクル
Microsoft でテナント キーを管理することになった場合、キー ライフサイクル操作の大半を Microsoft で行います。 ただし、テナント キーを自主管理することになった場合、キー ライフサイクル操作の多くといくつかの追加の手順を自社で行う必要があります。

この 2 つの方法の概要と比較を次の図に示します。 最初の図から、Microsoft がテナント キーを管理するという既定構成では管理者のオーバーヘッドが非常に少ないことがわかります。

![Azure RMS テナント キー ライフサイクル - Microsoft が既定で管理](../media/RMS_BYOK_cloud.png)

2 番目の図では、テナント キーを自主管理する場合に必要な追加の手順を示しています。

![Azure RMS テナント キー ライフサイクル - 自主管理](../media/RMS_BYOK_onprem.png)

テナント キーを Microsoft で管理する場合、キーの生成に関する操作は不要です。「[次のステップ](plan-implement-tenant-key.md#next-steps)」に進んでください。

テナント キーを自主管理する場合、詳細については以下のセクションを参照してください。

## Azure Rights Management テナント キーの実装

このセクションでは、テナント キーの生成と管理を行う場合、つまり BYOK (Bring Your Own Key) シナリオについて説明します。


> [!IMPORTANT]
> [!INCLUDE[aad_rightsmanagement_1](../includes/aad_rightsmanagement_1_md.md)] の使用を開始していて (サービスがアクティブになっている)、Office 2010 を実行するユーザーが存在する場合は、以下の手順を実行する前に、Microsoft カスタマー サポート サービス (CSS) にお問い合わせください。 シナリオと要件により、制限事項があったり追加の手順を行うことで BYOK を使用することができます。
> 
> キーの処理に関して組織固有のポリシーがある場合も CSS にお問い合わせください。

### BYOK の前提条件
次の表に BYOK (Bring Your Own Key) の前提条件を示します。

|要件|説明|
|---------------|--------------------|
|Azure RMS をサポートするサブスクリプション。|利用可能なサブスクリプションの詳細については、「[Cloud subscriptions that support Azure RMS (Azure RMS をサポートするクラウド サブスクリプション)](../get-started/requirements-subscriptions.md)」を参照してください。|
|個人向け RMS または Exchange Online は使用しないでください。 または、Exchange Online を使用する場合は、この構成で BYOK を使用することには制限があることをご理解ください。|BYOK の現在の制限事項の詳細については、「[BYOK の料金と制限事項](byok-price-restrictions.md)」を参照してください。<br /><br />**重要**: 現在、BYOK には Exchange Online との互換性がありません。|
|Thales HSM、スマートカード、サポート ソフトウェア。<br /><br />**注**: ソフトウェア キーとハードウェア キーを使用して AD RMS から Azure RMS への移行を行う場合は、Thales ドライバーのバージョンが 11.62 以降である必要があります。|Thales ハードウェア セキュリティ モジュールにアクセスでき、Thales HSM の基本的な操作知識を持っている必要があります。 互換性のあるモジュールの一覧について、または HSM を持っていない場合の購入方法については、「 [Thales ハードウェア セキュリティ モジュール](http://www.thales-esecurity.com/msrms/buy) 」を参照してください。|
|テナント キーを物理的ではなくインターネット経由で米国レドモンドに送信する場合: 3 つの要件があります。<br /><br />1: Windows 7 以降の Windows オペレーティング システムと Thales nShield ソフトウェア バージョン 11.62 以降をインストールしたオフライン x64 ワークステーション。<br /><br />このワークステーションで Windows 7 を実行する場合、 [Microsoft .NET Framework 4.5 をインストール](http://go.microsoft.com/fwlink/?LinkId=225702)する必要があります。<br /><br />2: インターネットに接続し、Windows 7 以降の Windows オペレーティング システムをインストールしたワークステーション。<br /><br />3: 空き容量が 16 MB 以上ある USB ドライブまたはポータブル ストレージ デバイス。|テナント キーをレドモンドまで持参する場合、この前提条件は不要です。<br /><br />セキュリティ上の理由から、最初のワークステーションはネットワークに接続しないことを推奨します。 ただし、これはプログラムを使用して適用できるものではありません。<br /><br />注: 次の手順では、この最初のワークステーションを**未接続ワークステーション**と呼んでいます。<br /><br />また、テナント キーが実稼働ネットワーク用である場合、ツールセットのダウンロードとテナント キーのアップロードには、別の予備のワークステーションを使用することを推奨します。 ただし、テスト目的では、最初の 1 つと同じワークステーションを使用することができます。<br /><br />注: 次の手順では、この予備のワークステーションを**インターネット接続ワークステーション**と呼んでいます。|

独自のテナント キーを生成して使用する手順は、インターネット経由で行うか、持参するかで異なります。

-   **インターネット経由:** この場合、ツールセットのダウンロードと使用、および Windows PowerShell コマンドレットなど、追加の構成手順が必要になります。 ただし、テナント キーを Microsoft の施設まで物理的に輸送する必要はありません。 セキュリティは次の方法で確保されます。

    -   オフライン ワークステーションからテナント キーを生成します。これにより攻撃を受ける可能性が小さくなります。

    -   テナント キーはキー交換のキー (KEK) で暗号化されます。これにより、Azure RMS HSM に送信されるまで暗号化された状態になります。 暗号化されたテナント キーのみが、元のワークステーションから移動します。

    -   ツールでテナント キーのプロパティを設定し、テナント キーを Azure RMS セキュリティ ワールドに関連付けます。 このため、Azure RMS HSM がテナント キーを受信して暗号化を解除すると、これらの HSM のみがそのテナント キーを使用できます。 テナント キーをエクスポートすることはできません。 この関連付けは Thales HSM により適用されます。

    -   テナント キーの暗号化に使用されるキー交換のキー (KEK) は、Azure RMS HSM 内部で生成され、エクスポートすることはできません。 HSM では、KEK の明確なバージョンを HSM 外部に示すことはありません。 また、ツールセットには、KEK がエクスポート不可能であることと Thales によって製造された真正の HSM 内部で生成されたことを示す、Thales からの証明書が含まれています。

    -   ツールセットには、Azure RMS セキュリティ ワールドも Thales によって製造された真正の HSM で生成されたことを示す、Thales からの証明書が含まれています。 これにより、Microsoft が真正のハードウェアを使用していることが証明されます。

    -   Microsoft では地域別に独立した KEK と独立したセキュリティ ワールドを使用します。これにより、テナント キーが暗号化された地域内のデータ センターのみでテナント キーを使用できることが保証されます。 たとえば、欧州のお客様のテナント キーを北米やアジアのデータ センターで使用することはできません。

    > [!NOTE]
    > テナント キーは、暗号化されていてアクセス制御レベル権限で保護されているので、信頼されないコンピューターとネットワークを経由して安全に移動できます。このため、テナント キーはお客様の HSM と Microsoft の Azure RMS 用 HSM 内でのみ使用可能になります。 ツールセットで提供されるスクリプトを使用してセキュリティ対策を確認できます。また、Thales 側の動作の詳細については、次を参照してください。「 [RMS クラウドでのハードウェア キー管理](https://www.thales-esecurity.com/knowledge-base/white-papers/hardware-key-management-in-the-rms-cloud)」

-   **持参:** これを行うには、マイクロソフト カスタマー サポート サービス (CSS) に連絡して Azure RMS 用のキーの転送を予約する必要があります。 米国ワシントン州レドモンドにある Microsoft のオフィスまでお越しいただき、テナント キーを Azure RMS セキュリティ ワールドに転送する必要があります。

操作方法に関する手順については、テナント キーを生成してインターネット経由で転送するか、持参するかを選択します。 

- [インターネット経由](generate-tenant-key-internet.md)
- [持参](generate-tenant-key-in-person.md)


## 次のステップ

テナント キーを計画 (および必要に応じて生成) した後は、次の操作を行います。

1.  テナント キーの使用を開始します。

    -   まだの場合はこの段階で Rights Management をアクティブにして、組織が RMS の使用を開始できるようにする必要があります。 ユーザーはすぐにテナント キーの使用を開始します (Microsoft による管理または自主管理)。

        アクティブ化の詳細については、「[Rights Management をアクティブにする](../deploy-use/activate-service.md)」を参照してください。

    -   既に Rights Management をアクティブにしていてテナント キーを自主管理する場合、ユーザーは古いテナント キーから新しいテナント キーへと段階的に移行します。この段階的な移行が完了するまで数週間かかることがあります。 古いテナント キーで保護されていたドキュメントやファイルは、権限のあるユーザーが引き続きアクセスできます。

2.  使用状況のログを使用することを検討します。このログには RMS で実行されるすべてのトランザクションが記録されます。

    テナント キーを自主管理する場合、ログにはテナント キーの使用に関する情報が記録されます。 Excel で表示される次のログ ファイルの例を参照してください。[Request Types] の [ **Decrypt** ] および [ **SignDigest** ] は、テナント キーが使用されていることを示しています。

    ![Excel のログ ファイル、テナント キーが使用されていることがわかる](../media/RMS_Logging.gif)

    使用状況ログの詳細については、「[Azure Rights Management の利用状況をログに記録して分析する](../deploy-use/log-analyze-usage.md)」を参照してください。

3.  テナント キーを維持管理します。

    詳細については、「[Azure Rights Management テナント キーに対する操作](../deploy-use/operations-tenant-key.md)」を参照してください。



<!--HONumber=May16_HO3-->


